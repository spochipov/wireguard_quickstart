# WireGuard Quickstart — Документация проекта

Краткая, упорядоченная документация по проекту. Вся основная информация и инструкции теперь вынесены в отдельные файлы для удобства.

Содержимое репозитория и документация:
- QUICK_START.md — пошаговая инструкция по быстрой установке и первоначальной проверке.
- README.md — этот файл: обзор, ссылки на подробные инструкции, структура проекта.
- scripts/README.md — документация по вспомогательным скриптам (как их использовать и где они устанавливаются).
- /etc/wireguard/clients — каталог с конфигурациями клиентов (не изменять вручную в репозитории).

Если нужно — детальная документация по каждому скрипту и примеры использования находятся в `scripts/README.md`.

## Быстрый обзор

Цель проекта
- Автоматизировать развёртывание WireGuard сервера с поддержкой IPv4/IPv6, настройкой firewall и удобными утилитами для добавления/удаления клиентов.

Ключевые скрипты (установочные и утилиты)
- `wg-server-setup.sh` — основной установочный скрипт (настраивает систему, генерирует ключи, создаёт /etc/wireguard/wg0.conf и устанавливает утилиты).
- `wg-add-client.sh` — генерирует конфиг клиента и добавляет peer в серверный конфиг.
- `wg-remove-client.sh`, `wg-list-clients.sh` — управление клиентами.
- `wg-debug-internet.sh` — диагностика проблем доступа в интернет для клиентов.
- `scripts/change-wg-port.sh` — утилита для изменения ListenPort на сервере (скрипт также обновляет правила firewall и может быть установлен в /usr/local/bin).
- Доп. скрипты в каталоге `scripts/` помогают с firewall и диагностикой.

Куда устанавливаются утилиты
- При установке большинство утилит копируются в `/usr/local/bin/` и становятся доступными в PATH, например:
  - `/usr/local/bin/wg-add-client`
  - `/usr/local/bin/wg-server-info`
  - `/usr/local/bin/change-wg-port`

Структура проекта (в репозитории)
- wg-server-setup.sh
- wg-add-client.sh
- wg-remove-client.sh
- wg-list-clients.sh
- wg-debug-internet.sh
- wg-performance-test.sh
- scripts/
  - change-wg-port.sh
  - wg-firewall-recommendations.sh
  - add-wg-input-rule.sh
  - clean-duplicates-and-save.sh
  - run-wg-diagnostics-and-collect.sh
  - WG_apply_commands.txt
- clients/  (локально: конфиги клиентов — оставляем без изменений)

Важно: директория `clients/` содержит клиентские конфигурации и не изменяется скриптом документации.

## Что сделано (последние изменения)
- Добавлена утилита `change-wg-port.sh` для смены порта WireGuard и управления правилами firewall.
- `wg-add-client.sh` улучшен: при генерации клиента порт для Endpoint берётся из `/etc/wireguard/wg0.conf`.
- Добавлена поддержка UFW/firewalld и автосохранение правил через netfilter-persistent в скрипте смены порта.
- Скрипты для очистки дубликатов правил и сохранения (`clean-duplicates-and-save.sh`) и для сбора диагностики (`run-wg-diagnostics-and-collect.sh`) добавлены в `scripts/`.

## Дальнейшие шаги / Как привести проект в порядок (выполнено)
- Обновить README (текущий документ) и вынести быстрый старт в QUICK_START.md — сделано/запланировано.
- Добавить `scripts/README.md` с описанием всех вспомогательных скриптов — см. `scripts/README.md`.
- Не изменять `clients/` — конфиги клиентов остаются в репозитории/на сервере.

## Ссылки
- QUICK_START.md — пошаговая установка и примеры команд.
- scripts/README.md — документация по скриптам и примеры использования.
- Документы и скрипты в каталоге `scripts/` — удобные утилиты для администрирования.
